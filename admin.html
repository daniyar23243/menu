<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Админ-панель</title>
  <link rel="stylesheet" href="admin.css">
</head>

<body>

  <h1>Админ-панель</h1>

  <h2>Добавить категорию</h2>
  <input id="cat_ru" placeholder="Название категории (RU)">
  <input id="cat_en" placeholder="Название категории (EN)">
  <input id="cat_kg" placeholder="Название категории (KG)">
  <input id="cat_img" placeholder="URL картинки">
  <button onclick="addCategory()">Добавить категорию</button>

  <hr>

  <h2>Добавить предмет</h2>

  <select id="categorySelect"></select>
  <input id="item_ru" placeholder="Название (RU)">
  <input id="item_en" placeholder="Название (EN)">
  <input id="item_kg" placeholder="Название (KG)">
  <input id="item_price" placeholder="Цена">
  <input id="item_img" placeholder="URL картинки">
  <button onclick="addItem()">Добавить предмет</button>

<script>
  // Загружаем категории в выпадающий список
  function loadCategories() {
    fetch("http://localhost:3000/categories")
      .then(res => res.json())
      .then(data => {
        const select = document.getElementById("categorySelect");
        data.forEach(cat => {
          let option = document.createElement("option");
          option.value = cat.id;
          option.textContent = cat.name_ru;
          select.append(option);
        });
      });
  }

  loadCategories();

  function addCategory() {
    const body = {
      name_ru: document.getElementById("cat_ru").value,
      name_en: document.getElementById("cat_en").value,
      name_kg: document.getElementById("cat_kg").value,
      image_url: document.getElementById("cat_img").value
    };

    fetch("http://localhost:3000/categories", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    }).then(() => alert("Категория добавлена!"));
  }

  function addItem() {
    const body = {
      category_id: document.getElementById("categorySelect").value,
      name_ru: document.getElementById("item_ru").value,
      name_en: document.getElementById("item_en").value,
      name_kg: document.getElementById("item_kg").value,
      price: document.getElementById("item_price").value,
      image_url: document.getElementById("item_img").value
    };

    fetch("http://localhost:3000/items", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    }).then(() => alert("Предмет добавлен!"));
  }
</script>

</body>
</html>
